#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏.
"""
import sys
from pathlib import Path

def main():
    print("üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏: TypeError: 'Bot' object is not subscriptable")
    print("=" * 70)
    
    project_path = Path(__file__).parent.parent
    handler_file = project_path / "app/bot/routers/misc/subscription_handler.py"
    
    print("üêõ –û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:")
    print("   services = callback.bot['services'] - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ services")
    print("   TypeError: 'Bot' object is not subscriptable")
    print()
    
    print("‚úÖ –ü–†–ò–ú–ï–ù–Å–ù–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:")
    if handler_file.exists():
        content = handler_file.read_text(encoding='utf-8')
        
        if "services: ServicesContainer" in content:
            print("   ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä services –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ñ—É–Ω–∫—Ü–∏—é")
        else:
            print("   ‚ùå –ü–∞—Ä–∞–º–µ—Ç—Ä services –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        if "callback.bot[" not in content:
            print("   ‚úÖ –£–±—Ä–∞–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ callback.bot[]")
        else:
            print("   ‚ùå –í—Å—ë –µ—â—ë –µ—Å—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ callback.bot[]")
        
        if "main_menu_keyboard(" in content:
            print("   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ main_menu_keyboard")
        else:
            print("   ‚ùå –í—ã–∑–æ–≤ main_menu_keyboard –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        if "IsAdmin()" in content:
            print("   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")
        else:
            print("   ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
    else:
        print("   ‚ùå –§–∞–π–ª subscription_handler.py –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return
    
    print()
    print("üöÄ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:")
    print("   ‚Ä¢ services —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ middleware")
    print("   ‚Ä¢ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏")
    print("   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")
    print("   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤")
    print()
    
    print("üîÑ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨:")
    print("   1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä")
    print("   2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: docker compose restart ducksnet-bot")
    print("   3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É'")
    print()
    
    print("üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:")
    print("   ‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç")
    print("   ‚Ä¢ –ù–ï –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª")
    print("   ‚Ä¢ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ - —É–≤–∏–¥–∏—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É")
    print("   ‚Ä¢ –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª")
    print("   ‚Ä¢ –ù–∞–∂–º–∏—Ç–µ '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É'")
    print("   ‚Ä¢ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–±–µ–∑ –æ—à–∏–±–æ–∫)")
    print()
    
    print("=" * 70)
    print("‚úÖ –û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.")

if __name__ == "__main__":
    main()
